services:
  quark:
    image: ghcr.io/casterlabs/quark:latest
    restart: always
    environment:
      QUARK_DEBUG: false
      QUARK_EXP_VIRTUAL_THREAD_HEAVY_IO: false # Unstable.
      QUARK_EXP_HLS: false # Untested.
      # QUARK_AUTH_SECRET: "my-hmac256-secret" # Can omit for a "dummy mode" where all API calls are unauthenticated.
      # QUARK_ANON_PREGEX: "" # The default playback regex for anonymous users. Omit to disallow anonymous viewership.
      # QUARK_WEBHOOK_URL: "https://..."
      # QUARK_THUMB_IT: 30 # How often Quark regenerates thumbnails, in seconds. Defaults to 30 if omitted.
    ports:
      - 1935:1935
      - 8080:8080 # BYO reverse proxy for SSL :)
